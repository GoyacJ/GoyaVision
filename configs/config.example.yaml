server:
  port: 8080

db:
  # postgres | mysql | sqlite3
  driver: "${GOYAVISION_DB_DRIVER:-postgres}"
  # Postgres: "host=... user=... password=... dbname=... port=5432 sslmode=disable"
  # MySQL: "user:pass@tcp(host:3306)/dbname?charset=utf8mb4&parseTime=True"
  # SQLite: "file:./data/goyavision.db?mode=rwc"
  dsn: "${GOYAVISION_DB_DSN}"

ffmpeg:
  bin: "${GOYAVISION_FFMPEG_BIN}"
  max_record: 16
  max_frame: 16

preview:
  provider: "mediamtx"
  mediamtx_bin: "${GOYAVISION_PREVIEW_MEDIAMTX_BIN}"
  max_preview: 10
  hls_base: "/live"

record:
  base_path: "${GOYAVISION_RECORD_BASE_PATH}"
  segment_sec: 300

ai:
  timeout: 10s
  retry: 2

jwt:
  secret: "${GOYAVISION_JWT_SECRET}"
  expire: 2h
  refresh_exp: 168h
  issuer: "goyavision"

mediamtx:
  api_address: "${GOYAVISION_MEDIAMTX_API_ADDRESS}"
  rtsp_address: "${GOYAVISION_MEDIAMTX_RTSP_ADDRESS}"
  rtmp_address: "${GOYAVISION_MEDIAMTX_RTMP_ADDRESS}"
  hls_address: "${GOYAVISION_MEDIAMTX_HLS_ADDRESS}"
  webrtc_address: "${GOYAVISION_MEDIAMTX_WEBRTC_ADDRESS}"
  playback_address: "${GOYAVISION_MEDIAMTX_PLAYBACK_ADDRESS}"
  record_path: "${GOYAVISION_MEDIAMTX_RECORD_PATH}"
  record_format: "fmp4"
  segment_duration: "1h"

# 文件存储：minio | s3 | local（未配置或 minio 时使用下方 minio 段）
storage:
  type: "${GOYAVISION_STORAGE_TYPE:-minio}"
  s3:
    region: "${GOYAVISION_S3_REGION}"
    bucket: "${GOYAVISION_S3_BUCKET}"
    endpoint: "${GOYAVISION_S3_ENDPOINT}"
    access_key: "${GOYAVISION_S3_ACCESS_KEY}"
    secret_key: "${GOYAVISION_S3_SECRET_KEY}"
    use_ssl: true
    public_base: "${GOYAVISION_S3_PUBLIC_BASE}"
  local:
    base_path: "${GOYAVISION_LOCAL_STORAGE_PATH:-./data/files}"
    base_url: "${GOYAVISION_LOCAL_STORAGE_BASE_URL:-http://localhost:8080/files}"

minio:
  endpoint: "${GOYAVISION_MINIO_ENDPOINT}"
  access_key: "${GOYAVISION_MINIO_ACCESS_KEY}"
  secret_key: "${GOYAVISION_MINIO_SECRET_KEY}"
  bucket_name: "${GOYAVISION_MINIO_BUCKET_NAME}"
  use_ssl: ${GOYAVISION_MINIO_USE_SSL}
  public_base: "${GOYAVISION_MINIO_PUBLIC_BASE}"

oauth:
  github:
    client_id: ""
    client_secret: ""
    redirect_uri: "http://localhost:5173/login"
  wechat:
    client_id: ""
    client_secret: ""
    redirect_uri: "http://localhost:5173/login"

# 支付配置
payment:
  alipay:
    app_id: ""
    private_key: ""
    public_key: ""
    notify_url: "http://your-domain.com/api/v1/payment/notify/alipay"
    return_url: "http://your-domain.com/profile?tab=payment"
    is_prod: false
  wechat:
    app_id: ""
    mch_id: ""
    api_key: ""
    cert_path: "configs/certs/wechat_cert.pem"
    key_path: "configs/certs/wechat_key.pem"
    notify_url: "http://your-domain.com/api/v1/payment/notify/wechat"
    is_prod: false
  union:
    mer_id: ""
    cert_path: "configs/certs/unionpay_cert.pfx"
    notify_url: "http://your-domain.com/api/v1/payment/notify/unionpay"
    is_prod: false

mcp:
  servers:
    - id: "default"
      name: "Default MCP Server"
      description: "Static MCP bootstrap server"
      status: "online"
      endpoint: ""
      api_token: ""
      timeout_sec: 30
      tools:
        - name: "echo"
          description: "Echo tool for connectivity checks"
          version: "1.0.0"
          input_schema:
            type: object
            properties:
              message:
                type: string
          output_schema:
            type: object
            properties:
              diagnostics:
                type: object