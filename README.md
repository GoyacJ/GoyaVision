# GoyaVision

<div align="center">

**æ™ºèƒ½åª’ä½“å¤„ç†å¹³å°**

[![License](https://img.shields.io/badge/license-Apache%202.0-blue.svg)](LICENSE)
[![Go Version](https://img.shields.io/badge/go-1.22+-00ADD8.svg)](https://golang.org/)
[![Go Report Card](https://goreportcard.com/badge/github.com/GoyaDo/GoyaVision)](https://goreportcard.com/report/github.com/GoyaDo/GoyaVision)

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [ç³»ç»Ÿæ¶æ„](#-ç³»ç»Ÿæ¶æ„) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [é…ç½®è¯´æ˜](#-é…ç½®è¯´æ˜) â€¢ [API æ–‡æ¡£](#-api-æ–‡æ¡£) â€¢ [è´¡çŒ®](#-è´¡çŒ®)

</div>

---

**GoyaVision** æ˜¯ä¸€ä¸ªåŸºäº Go + Vue 3 çš„æ™ºèƒ½åª’ä½“å¤„ç†å¹³å°ï¼Œé‡‡ç”¨ Clean Architecture æ¶æ„è®¾è®¡ã€‚æ ¸å¿ƒç†å¿µæ˜¯**"ä¸šåŠ¡=é…ç½®ã€èƒ½åŠ›=æ’ä»¶ã€æ‰§è¡Œ=å¼•æ“"**ã€‚å¹³å°é€šè¿‡ç‰ˆæœ¬åŒ–ç®—å­ã€å¤šæ‰§è¡Œæ¨¡å¼ï¼ˆMCP/HTTP/CLIï¼‰å’Œ DAG å·¥ä½œæµå¼•æ“ï¼Œå®ç°å¤æ‚çš„ AI åª’ä½“å¤„ç†åœºæ™¯è‡ªåŠ¨åŒ–ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ“¦ èµ„äº§åº“ï¼ˆAsset Libraryï¼‰

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| **åª’ä½“æºç®¡ç†** | æ”¯æŒæ‹‰æµï¼ˆRTSP/RTMPï¼‰ã€æ¨æµã€æ–‡ä»¶ä¸Šä¼  |
| **åª’ä½“èµ„äº§** | ç»Ÿä¸€ç®¡ç†è§†é¢‘ã€å›¾ç‰‡ã€éŸ³é¢‘èµ„äº§ï¼Œæ”¯æŒæ ‡ç­¾ã€æœç´¢ã€æ´¾ç”Ÿè¿½è¸ª |
| **å½•åˆ¶ä¸ç‚¹æ’­** | åˆ†æ®µå½•åˆ¶ï¼ˆfMP4/MPEG-TSï¼‰ã€HLS/MP4 ç‚¹æ’­ã€Seek è·³è½¬ |
| **å¤šåè®®é¢„è§ˆ** | æ”¯æŒ RTSPã€RTMPã€HLSã€WebRTC å¤šåè®®é¢„è§ˆ |
| **å­˜å‚¨ç®¡ç†** | é…ç½®å­˜å‚¨è·¯å¾„ã€ç”Ÿå‘½å‘¨æœŸç­–ç•¥ã€å­˜å‚¨é™é¢ |

### ğŸ§© ç®—å­ä¸­å¿ƒï¼ˆOperator Hubï¼‰

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| **ç‰ˆæœ¬åŒ–ç®¡ç†** | å¤šç‰ˆæœ¬æ”¯æŒï¼ˆcreate/activate/rollback/archiveï¼‰ã€ç‰ˆæœ¬å…¼å®¹æ€§æ ¡éªŒ |
| **å¤šæ‰§è¡Œæ¨¡å¼** | HTTPã€CLIã€MCP ä¸‰ç§æ‰§è¡Œæ¨¡å¼ç»Ÿä¸€è·¯ç”± |
| **æ ‡å‡†åŒ–åè®®** | JSON Schema è¾“å…¥è¾“å‡ºæ ¡éªŒã€è¿æ¥å…¼å®¹æ€§æ ¡éªŒ |
| **ç®—å­æ¨¡æ¿** | æ¨¡æ¿å¸‚åœºã€å®‰è£…æ¨¡æ¿ã€æ¨¡æ¿åŒæ­¥ |
| **ä¾èµ–æ²»ç†** | ç®—å­ä¾èµ–å£°æ˜ã€æœ€å°ç‰ˆæœ¬çº¦æŸã€å‘å¸ƒé—¨ç¦ |
| **MCP ç”Ÿæ€** | MCP Server æ³¨å†Œã€Tool æµè§ˆã€å·¥å…·å®‰è£…ä¸ºç®—å­ |

#### å†…ç½®ç®—å­åˆ†ç±»

**åˆ†æç±»ï¼ˆAnalysisï¼‰**ï¼š
- æŠ½å¸§ã€ç›®æ ‡æ£€æµ‹ã€äººè„¸è¯†åˆ«ã€OCRã€ç›®æ ‡è¿½è¸ªã€å›¾åƒåˆ†ç±»ã€åœºæ™¯æ£€æµ‹ã€ASR

**ç¼–è¾‘ç±»ï¼ˆProcessingï¼‰**ï¼š
- è§†é¢‘å‰ªè¾‘ã€è£å‰ªã€æ‰“ç ã€å»æ°´å°ã€åŠ æ°´å°ã€å­—å¹•ç”Ÿæˆã€éŸ³é¢‘æ··åˆ

**ç”Ÿæˆç±»ï¼ˆGenerationï¼‰**ï¼š
- TTSã€é«˜å…‰æ‘˜è¦ã€è§†é¢‘æ‰©å±•ã€å›¾åƒç”Ÿæˆ

**è½¬æ¢ç±»ï¼ˆTransformï¼‰**ï¼š
- è§†é¢‘è½¬ç ã€å‹ç¼©ã€åˆ†è¾¨ç‡è°ƒæ•´ã€éŸ³é¢‘è½¬ç ã€å›¾ç‰‡ç¼©æ”¾ã€è§†é¢‘å¢å¼º

**å®ç”¨ç±»ï¼ˆUtilityï¼‰**ï¼š
- æ–‡ä»¶å¤„ç†ã€æ ¼å¼è½¬æ¢ã€å…ƒæ•°æ®æå–

### ğŸ”„ ä»»åŠ¡ä¸­å¿ƒï¼ˆTask Centerï¼‰

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| **å·¥ä½œæµç¼–æ’** | é€šè¿‡ DAG ç¼–æ’ç®—å­ï¼Œå®ç°å¤æ‚ä¸šåŠ¡æµç¨‹ |
| **å¯è§†åŒ–è®¾è®¡å™¨** | æ‹–æ‹½å¼å·¥ä½œæµè®¾è®¡ï¼ˆè§„åˆ’ä¸­ï¼‰ |
| **å¤šç§è§¦å‘å™¨** | æ‰‹åŠ¨è§¦å‘ã€å®šæ—¶è°ƒåº¦ã€äº‹ä»¶è§¦å‘ |
| **ä»»åŠ¡ç®¡ç†** | ä»»åŠ¡åˆ›å»ºã€æ‰§è¡Œã€ç›‘æ§ã€é‡è¯•ã€å–æ¶ˆ |
| **äº§ç‰©ç®¡ç†** | ç»Ÿä¸€ç®¡ç†ç®—å­è¾“å‡ºï¼ˆæ–°èµ„äº§ã€ç»“æ„åŒ–ç»“æœã€æ—¶é—´è½´ï¼‰ |

### ğŸ›ï¸ æ§åˆ¶å°ï¼ˆConsoleï¼‰

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| **ç”¨æˆ·ç®¡ç†** | ç”¨æˆ· CRUDã€è§’è‰²åˆ†é…ã€çŠ¶æ€æ§åˆ¶ |
| **è§’è‰²ç®¡ç†** | RBAC æƒé™æ¨¡å‹ã€æƒé™/èœå•åˆ†é… |
| **è®¤è¯æˆæƒ** | JWT Tokenï¼ˆAccess + Refresh åŒ Tokenï¼‰ |
| **ä»ªè¡¨ç›˜** | ç³»ç»Ÿæ¦‚è§ˆã€å®æ—¶ç›‘æ§ã€ç»Ÿè®¡æŠ¥è¡¨ï¼ˆè§„åˆ’ä¸­ï¼‰ |
| **å®¡è®¡æ—¥å¿—** | æ“ä½œæ—¥å¿—ã€ç³»ç»Ÿäº‹ä»¶ï¼ˆè§„åˆ’ä¸­ï¼‰ |

### ğŸ–¥ï¸ Web ç®¡ç†ç•Œé¢

- Vue 3 + TypeScript + Element Plus
- åª’ä½“æºç®¡ç†ï¼ˆå¤šåè®®é¢„è§ˆã€å½•åˆ¶æ§åˆ¶ï¼‰
- åª’ä½“èµ„äº§ç®¡ç†ï¼ˆæœç´¢ã€æ ‡ç­¾ã€é¢„è§ˆï¼‰
- ç®—å­ä¸­å¿ƒï¼ˆç®—å­å¸‚åœºã€é…ç½®ï¼‰
- å·¥ä½œæµç¼–æ’ï¼ˆå¯è§†åŒ–è®¾è®¡å™¨ï¼‰
- ä»»åŠ¡ç®¡ç†ï¼ˆæ‰§è¡Œè¯¦æƒ…ã€äº§ç‰©æŸ¥çœ‹ï¼‰
- ç³»ç»Ÿç®¡ç†ï¼ˆç”¨æˆ·ã€è§’è‰²ã€èœå•ï¼‰
- å†…åµŒå¼éƒ¨ç½²ï¼ˆGo embedï¼‰

## ğŸ“¸ ç•Œé¢é¢„è§ˆ

### ç™»å½•é¡µé¢

å®‰å…¨çš„ç”¨æˆ·è®¤è¯ï¼Œæ”¯æŒ JWT Token ç™»å½•ã€‚

![ç™»å½•é¡µé¢](docs/image/login.png)

### è§†é¢‘æµç®¡ç†

ç®¡ç†è§†é¢‘æµï¼Œæ”¯æŒæ‹‰æµ/æ¨æµã€å¤šåè®®é¢„è§ˆã€å½•åˆ¶å’Œç‚¹æ’­ã€‚

![è§†é¢‘æµç®¡ç†](docs/image/streams.png)

### ç®—æ³•ç®¡ç†

é…ç½® AI ç®—æ³•ï¼Œå®šä¹‰æ¨ç†æœåŠ¡ç«¯ç‚¹å’Œè¾“å…¥è¾“å‡ºè§„èŒƒã€‚

![ç®—æ³•ç®¡ç†](docs/image/algorithms.png)

### æ¨ç†ç»“æœ

æŸ¥è¯¢å’Œæµè§ˆ AI æ¨ç†ç»“æœï¼Œæ”¯æŒæŒ‰æµã€æ—¶é—´èŒƒå›´è¿‡æ»¤ã€‚

![æ¨ç†ç»“æœ](docs/image/inference-results.png)

### ç”¨æˆ·ç®¡ç†

ç®¡ç†ç³»ç»Ÿç”¨æˆ·ï¼Œæ”¯æŒè§’è‰²åˆ†é…å’ŒçŠ¶æ€æ§åˆ¶ã€‚

![ç”¨æˆ·ç®¡ç†](docs/image/user.png)

### è§’è‰²ç®¡ç†

åŸºäº RBAC çš„è§’è‰²æƒé™ç®¡ç†ï¼Œçµæ´»é…ç½®èœå•å’Œæ“ä½œæƒé™ã€‚

![è§’è‰²ç®¡ç†](docs/image/role.png)

### èœå•ç®¡ç†

åŠ¨æ€èœå•é…ç½®ï¼Œæ”¯æŒç›®å½•ã€èœå•ã€æŒ‰é’®ä¸‰çº§æƒé™æ§åˆ¶ã€‚

![èœå•ç®¡ç†](docs/image/menu.png)

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒæ¦‚å¿µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MediaSource â”‚  åª’ä½“æºï¼ˆæµã€ä¸Šä¼ ï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ äº§ç”Ÿ
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MediaAsset  â”‚  åª’ä½“èµ„äº§ï¼ˆè§†é¢‘ã€å›¾ç‰‡ã€éŸ³é¢‘ï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ è¾“å…¥
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Operator   â”‚  ç®—å­ï¼ˆAI/åª’ä½“å¤„ç†èƒ½åŠ›å•å…ƒï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ç¼–æ’
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Workflow   â”‚  å·¥ä½œæµï¼ˆDAG ç¼–æ’ï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ æ‰§è¡Œ
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Task     â”‚  ä»»åŠ¡ï¼ˆæ‰§è¡Œå®ä¾‹ï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ äº§ç”Ÿ
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Artifact   â”‚  äº§ç‰©ï¼ˆæ–°èµ„äº§ã€ç»“æœã€æ—¶é—´è½´ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ· / è®¾å¤‡                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RTSP æ¨æµ   â”‚       â”‚   RTMP æ¨æµ   â”‚       â”‚   Web ç•Œé¢    â”‚
â”‚   (æ‘„åƒå¤´)    â”‚       â”‚   (OBSç­‰)     â”‚       â”‚   (æµè§ˆå™¨)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MediaMTX                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  RTSP   â”‚ â”‚  RTMP   â”‚ â”‚   HLS   â”‚ â”‚ WebRTC  â”‚ â”‚ Playback â”‚  â”‚
â”‚  â”‚  :8554  â”‚ â”‚  :1935  â”‚ â”‚  :8888  â”‚ â”‚  :8889  â”‚ â”‚  :9996   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          API :9997                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       GoyaVision                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    API Layer (:8080)                     â”‚   â”‚
â”‚  â”‚  Auth â”‚ Asset â”‚ Operator â”‚ Workflow â”‚ Task â”‚ Artifact  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    App Layer                             â”‚   â”‚
â”‚  â”‚  AssetService â”‚ WorkflowService â”‚ TaskService â”‚ ...     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Adapter Layer                          â”‚   â”‚
â”‚  â”‚  Repository â”‚ MediaMTX â”‚ FFmpeg â”‚ WorkflowEngine â”‚ AI  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PostgreSQL                                 â”‚
â”‚  sources â”‚ assets â”‚ operators â”‚ workflows â”‚ tasks â”‚ artifacts  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆ†å±‚æ¶æ„

GoyaVision é‡‡ç”¨**åˆ†å±‚æ¶æ„**ï¼ˆClean Architectureï¼‰ï¼Œç¡®ä¿ä¸šåŠ¡é€»è¾‘ä¸åŸºç¡€è®¾æ–½è§£è€¦ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API       â”‚  HTTP å±‚ï¼šè·¯ç”±ã€Handlerã€DTOã€ä¸­é—´ä»¶
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚    App      â”‚  åº”ç”¨å±‚ï¼šä¸šåŠ¡ç”¨ä¾‹ã€æœåŠ¡ç¼–æ’
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Port      â”‚â—„â”€â”€â”€â”€â”€â”¤   Domain    â”‚  ç«¯å£ä¸é¢†åŸŸï¼šæ¥å£ã€å®ä½“
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ å®ç°
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  Adapter    â”‚  é€‚é…å™¨å±‚ï¼šæ•°æ®åº“ã€MediaMTXã€AIã€å·¥ä½œæµå¼•æ“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDocker Composeï¼ˆæ¨èï¼‰

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/GoyaDo/GoyaVision.git
cd GoyaVision

# ä¸€é”®å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f goyavision
```

æœåŠ¡ç«¯å£ï¼š

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| GoyaVision | 8080 | Web ç•Œé¢å’Œ API |
| MediaMTX RTSP | 8554 | RTSP æµæ¥å…¥/è¾“å‡º |
| MediaMTX RTMP | 1935 | RTMP æµæ¥å…¥/è¾“å‡º |
| MediaMTX HLS | 8888 | HLS æ’­æ”¾ |
| MediaMTX WebRTC | 8889 | WebRTC æ’­æ”¾ |
| MediaMTX API | 9997 | MediaMTX æ§åˆ¶ API |
| PostgreSQL | 5432 | æ•°æ®åº“ |

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

#### å‰ç½®è¦æ±‚

- Go 1.22+
- Node.js 18+
- PostgreSQL 12+
- FFmpegï¼ˆç”¨äº AI æŠ½å¸§ï¼‰
- MediaMTXï¼ˆæµåª’ä½“æœåŠ¡å™¨ï¼‰

#### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/GoyaDo/GoyaVision.git
cd GoyaVision

# 2. åˆ›å»ºæ•°æ®åº“
createdb goyavision

# 3. å¯åŠ¨ MediaMTX
# ä¸‹è½½: https://github.com/bluenviron/mediamtx/releases
mediamtx ./configs/mediamtx.yml

# 4. æ„å»ºå‰ç«¯
cd web && npm install && npm run build && cd ..

# 5. æ„å»ºåç«¯
go build -o bin/goyavision ./cmd/server

# 6. è¿è¡Œ
./bin/goyavision
```

### é»˜è®¤è´¦å·

| ç”¨æˆ·å | å¯†ç  | è§’è‰² |
|--------|------|------|
| admin | admin123 | è¶…çº§ç®¡ç†å‘˜ |

> âš ï¸ **å®‰å…¨æç¤º**ï¼šç”Ÿäº§ç¯å¢ƒè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

### è®¿é—®åœ°å€

- **Web ç•Œé¢**ï¼šhttp://localhost:8080
- **API æ–‡æ¡£**ï¼šhttp://localhost:8080/api/v1

## âš™ï¸ é…ç½®è¯´æ˜

### ä¸»é…ç½®æ–‡ä»¶ `configs/config.<env>.yaml`

```yaml
server:
  port: 8080

db:
  dsn: "host=localhost user=goyavision password=goyavision dbname=goyavision port=5432 sslmode=disable"

ffmpeg:
  bin: "ffmpeg"
  max_record: 16
  max_frame: 16

preview:
  provider: "mediamtx"
  mediamtx_bin: "mediamtx"
  max_preview: 10
  hls_base: "/live"

record:
  base_path: "./data/recordings"
  segment_sec: 300

ai:
  timeout: 10s
  retry: 2

jwt:
  secret: "goyavision-secret-change-in-production"
  expire: 2h
  refresh_exp: 168h
  issuer: "goyavision"

mediamtx:
  api_address: "http://localhost:9997"
  rtsp_address: "rtsp://localhost:8554"
  rtmp_address: "rtmp://localhost:1935"
  hls_address: "http://localhost:8888"
  webrtc_address: "http://localhost:8889"
  playback_address: "http://localhost:9996"
  record_path: "./data/recordings/%path/%Y-%m-%d_%H-%M-%S"
  record_format: "fmp4"
  segment_duration: "1h"

minio:
  endpoint: "localhost:9000"
  access_key: "minioadmin"
  secret_key: "minioadmin"
  bucket_name: "goyavision"
  use_ssl: false
```

### ç¯å¢ƒå˜é‡è¦†ç›–

æ‰€æœ‰é…ç½®é¡¹éƒ½å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–ï¼Œå‰ç¼€ä¸º `GOYAVISION_`ï¼š

```bash
export GOYAVISION_DB_DSN="host=localhost ..."
export GOYAVISION_JWT_SECRET="your-production-secret"
export GOYAVISION_MEDIAMTX_API_ADDRESS="http://mediamtx:9997"
```

## ğŸ“¡ æµåè®®åœ°å€

åˆ›å»ºåª’ä½“æºåï¼Œå¯é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

| åè®® | åœ°å€æ ¼å¼ | ç”¨é€” |
|------|----------|------|
| RTSP | `rtsp://host:8554/{source_name}` | ä½å»¶è¿Ÿæ’­æ”¾ã€VLC |
| RTMP | `rtmp://host:1935/{source_name}` | OBS æ¨æµ/æ’­æ”¾ |
| HLS | `http://host:8888/{source_name}/index.m3u8` | Web æ’­æ”¾ |
| WebRTC | `http://host:8889/{source_name}/whep` | è¶…ä½å»¶è¿Ÿ Web æ’­æ”¾ |

**æ¨æµåœ°å€**ï¼ˆç”¨äº OBSã€FFmpeg ç­‰ï¼‰ï¼š

```bash
# RTSP æ¨æµ
ffmpeg -i input.mp4 -c copy -f rtsp rtsp://localhost:8554/mystream

# RTMP æ¨æµ
ffmpeg -i input.mp4 -c copy -f flv rtmp://localhost:1935/mystream
```

## ğŸ“š API æ–‡æ¡£

### API ç«¯ç‚¹æ¦‚è§ˆ

| æ¨¡å— | ç«¯ç‚¹å‰ç¼€ | è¯´æ˜ |
|------|----------|------|
| **è®¤è¯** | `/api/v1/auth` | ç™»å½•ã€ç™»å‡ºã€Token åˆ·æ–° |
| **ç”¨æˆ·** | `/api/v1/users` | ç”¨æˆ·ç®¡ç† |
| **è§’è‰²** | `/api/v1/roles` | è§’è‰²ç®¡ç† |
| **æƒé™** | `/api/v1/permissions` | æƒé™åˆ—è¡¨ |
| **èœå•** | `/api/v1/menus` | èœå•ç®¡ç† |
| **åª’ä½“æº** | `/api/v1/sources` | åª’ä½“æºç®¡ç†ã€å½•åˆ¶æ§åˆ¶ |
| **åª’ä½“èµ„äº§** | `/api/v1/assets` | åª’ä½“èµ„äº§ç®¡ç† |
| **ç®—å­** | `/api/v1/operators` | ç®—å­ç®¡ç† |
| **å·¥ä½œæµ** | `/api/v1/workflows` | å·¥ä½œæµç¼–æ’ |
| **ä»»åŠ¡** | `/api/v1/tasks` | ä»»åŠ¡ç®¡ç† |
| **äº§ç‰©** | `/api/v1/artifacts` | äº§ç‰©ç®¡ç† |

è¯¦ç»† API æ–‡æ¡£è§ [API æ–‡æ¡£](docs/api.md)ã€‚

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ |
|------|------|
| **åç«¯** | Go 1.22, Echo v4, GORM, Viper, gocron/v2 |
| **æ•°æ®åº“** | PostgreSQL 12+ |
| **æµåª’ä½“** | MediaMTXï¼ˆRTSP/RTMP/HLS/WebRTC/SRTï¼‰ |
| **è§†é¢‘å¤„ç†** | FFmpeg |
| **å‰ç«¯** | Vue 3, TypeScript, Vite, Element Plus, video.js |
| **è®¤è¯** | JWT (golang-jwt/jwt/v5), bcrypt |
| **éƒ¨ç½²** | Docker, Docker Compose |

## ğŸ“ é¡¹ç›®ç»“æ„

```
goyavision/
â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ server/              # åç«¯åº”ç”¨å…¥å£
â”‚   â””â”€â”€ init/                # åˆå§‹åŒ–å·¥å…·
â”œâ”€â”€ config/                  # é…ç½®ç»“æ„å®šä¹‰ï¼ˆGo typesï¼‰
â”œâ”€â”€ configs/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.dev.yaml      # å¼€å‘é…ç½®
â”‚   â”œâ”€â”€ config.prod.yaml     # ç”Ÿäº§é…ç½®
â”‚   â”œâ”€â”€ config.example.yaml  # é…ç½®æ¨¡æ¿
â”‚   â”œâ”€â”€ .env.example         # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â””â”€â”€ mediamtx*.yml        # MediaMTX é…ç½®æ¨¡æ¿
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ domain/              # é¢†åŸŸå®ä½“ï¼ˆçº¯ Go structsï¼‰
â”‚   â”‚   â”œâ”€â”€ identity/        # èº«ä»½å®ä½“ï¼ˆUser, Role, Permission, Menuï¼‰
â”‚   â”‚   â”œâ”€â”€ media/           # åª’ä½“å®ä½“ï¼ˆMediaSource, MediaAssetï¼‰
â”‚   â”‚   â”œâ”€â”€ operator/        # ç®—å­å®ä½“ï¼ˆOperator, Version, Template, Dependencyï¼‰
â”‚   â”‚   â””â”€â”€ workflow/        # å·¥ä½œæµå®ä½“ï¼ˆWorkflow, Node, Edgeï¼‰
â”‚   â”œâ”€â”€ port/                # ç«¯å£æ¥å£ï¼ˆPortï¼‰
â”‚   â”‚   â”œâ”€â”€ engine.go        # OperatorExecutor, WorkflowEngine
â”‚   â”‚   â”œâ”€â”€ mcp.go           # MCPClient, MCPRegistry
â”‚   â”‚   â”œâ”€â”€ mediamtx.go       # MediaGateway
â”‚   â”‚   â””â”€â”€ repository.go     # Repository æ¥å£
â”‚   â”œâ”€â”€ app/                 # åº”ç”¨å±‚ï¼ˆCQRSï¼‰
â”‚   â”‚   â”œâ”€â”€ command/         # å‘½ä»¤å¤„ç†å™¨ï¼ˆWriteï¼‰
â”‚   â”‚   â”œâ”€â”€ query/           # æŸ¥è¯¢å¤„ç†å™¨ï¼ˆReadï¼‰
â”‚   â”‚   â”œâ”€â”€ dto/             # åº”ç”¨ DTOï¼ˆCommand/Query/Resultï¼‰
â”‚   â”‚   â””â”€â”€ port/            # å‡ºç«™ç«¯å£ï¼ˆUnitOfWork, SchemaValidator ç­‰ï¼‰
â”‚   â”œâ”€â”€ adapter/             # é€‚é…å™¨å±‚ï¼ˆå®ç° Portï¼‰
â”‚   â”‚   â”œâ”€â”€ engine/          # æ‰§è¡Œå™¨ï¼ˆHTT/CLI/MCP/Routingï¼‰
â”‚   â”‚   â”œâ”€â”€ mcp/             # MCP å®¢æˆ·ç«¯ä¸æ¨¡æ¿åŒæ­¥
â”‚   â”‚   â”œâ”€â”€ schema/           # JSON Schema æ ¡éªŒå™¨
â”‚   â”‚   â”œâ”€â”€ mediamtx/         # MediaMTX HTTP Client
â”‚   â”‚   â””â”€â”€ persistence/      # Repository å®ç°ï¼ˆGORMï¼‰
â”‚   â”œâ”€â”€ infra/               # åŸºç¡€è®¾æ–½ï¼ˆå¤–éƒ¨æœåŠ¡é›†æˆï¼‰
â”‚   â”‚   â”œâ”€â”€ auth/            # JWT Service
â”‚   â”‚   â”œâ”€â”€ engine/          # DAGWorkflowEngine
â”‚   â”‚   â”œâ”€â”€ eventbus/        # EventBusï¼ˆæœ¬åœ°å®ç°ï¼‰
â”‚   â”‚   â”œâ”€â”€ mediamtx/        # MediaGatewayï¼ˆMediaMTX å°è£…ï¼‰
â”‚   â”‚   â”œâ”€â”€ minio/           # ObjectStorageï¼ˆMinIO å°è£…ï¼‰
â”‚   â”‚   â””â”€â”€ persistence/      # Model, Mapper, UoW
â”‚   â””â”€â”€ api/                 # HTTP å±‚
â”‚       â”œâ”€â”€ handler/         # Handlerï¼ˆæ³¨å…¥ Command/Query Handlerï¼‰
â”‚       â”œâ”€â”€ dto/             # API DTOï¼ˆRequest/Responseï¼‰
â”‚       â”œâ”€â”€ middleware/      # Auth, Permission, ErrorHandler
â”‚       â””â”€â”€ router.go         # è·¯ç”±æ³¨å†Œ
â”œâ”€â”€ pkg/                     # å…¬å…±åº“
â”‚   â”œâ”€â”€ apperr/              # ç»Ÿä¸€é”™è¯¯ç±»å‹
â”‚   â”œâ”€â”€ logger/               # ç»“æ„åŒ–æ—¥å¿—
â”‚   â”œâ”€â”€ pagination/           # åˆ†é¡µå·¥å…·
â”‚   â”œâ”€â”€ storage/             # å­˜å‚¨æ¥å£ä¸ MinIO å®ç°
â”‚   â””â”€â”€ ffmpeg/             # FFmpeg Pool & Manager
â”œâ”€â”€ migrations/              # æ•°æ®åº“è¿ç§»è„šæœ¬
â”œâ”€â”€ web/                     # Vue 3 å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/             # API å®¢æˆ·ç«¯ï¼ˆTypeScriptï¼‰
â”‚   â”‚   â”œâ”€â”€ views/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/      # ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ composables/     # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ design-tokens/   # è®¾è®¡ä»¤ç‰Œ
â”‚   â”‚   â””â”€â”€ store/           # Pinia Store
â”‚   â””â”€â”€ ...
â”œâ”€â”€ scripts/                 # æ„å»ºä¸æ£€æŸ¥è„šæœ¬
â”œâ”€â”€ docker-compose.yml       # Docker ç¼–æ’
â””â”€â”€ Makefile                 # æ„å»ºè„šæœ¬
```

## ğŸ“– æ–‡æ¡£

- [æ–‡æ¡£æ€»è§ˆ](docs/README.md) - æ–‡æ¡£é˜…è¯»é¡ºåºä¸ç»´æŠ¤çº¦å®š
- [éœ€æ±‚æ–‡æ¡£](docs/requirements.md) - åŠŸèƒ½éœ€æ±‚å®šä¹‰
- [å¼€å‘è¿›åº¦](docs/development-progress.md) - å¼€å‘çŠ¶æ€ä¸è·¯çº¿å›¾
- [æ¶æ„æ–‡æ¡£](docs/architecture.md) - ç³»ç»Ÿæ¶æ„è¯´æ˜
- [API æ–‡æ¡£](docs/api.md) - RESTful API è¯¦ç»†æ–‡æ¡£
- [éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT.md) - éƒ¨ç½²å’Œè¿ç»´
- [å˜æ›´æ—¥å¿—](CHANGELOG.md) - ç‰ˆæœ¬æ›´æ–°è®°å½•
- [Cursor å¼€å‘å·¥ä½œæµ](.cursor/rules/development-workflow.mdc) - æ–°éœ€æ±‚å‰æŸ¥é˜…æ–‡æ¡£ã€å¼€å‘ä¸­éµå¾ª Rules/Skillsã€å®Œæˆåæ›´æ–°æ–‡æ¡£å¹¶æäº¤ï¼ˆé…åˆ `.cursor/skills/development-workflow/SKILL.md` ä¸ `.cursor/hooks.json`ï¼‰
- [Cline å¼€å‘è§„åˆ™](.clinerules/00-universal.md) - Cline ä¸“ç”¨è§„åˆ™ã€Hooks ä¸å·¥ä½œæµï¼ˆ`.clinerules/` / `.cline/`ï¼‰

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) äº†è§£å¦‚ä½•å‚ä¸ã€‚

- ğŸ› [æŠ¥å‘Š Bug](https://github.com/GoyaDo/GoyaVision/issues/new?template=bug_report.md)
- ğŸ’¡ [åŠŸèƒ½å»ºè®®](https://github.com/GoyaDo/GoyaVision/issues/new?template=feature_request.md)
- ğŸ“ [æ”¹è¿›æ–‡æ¡£](CONTRIBUTING.md#æ–‡æ¡£è´¡çŒ®)
- ğŸ’» [æäº¤ä»£ç ](CONTRIBUTING.md#æäº¤ä»£ç )

è¯·éµå¾ªæˆ‘ä»¬çš„ [è¡Œä¸ºå‡†åˆ™](CODE_OF_CONDUCT.md)ã€‚

## ğŸ”’ å®‰å…¨

å¦‚æœæ‚¨å‘ç°å®‰å…¨æ¼æ´ï¼Œè¯·æŸ¥çœ‹ [å®‰å…¨ç­–ç•¥](SECURITY.md) äº†è§£å¦‚ä½•æŠ¥å‘Šã€‚

**è¯·å‹¿**åœ¨å…¬å¼€ Issue ä¸­æŠ¥å‘Šå®‰å…¨é—®é¢˜ã€‚

## ğŸ“„ è®¸å¯è¯

[Apache License 2.0](LICENSE)

## ğŸ‘¤ ä½œè€…

**Goya**

- ç½‘ç«™: [www.ysmjjsy.com](https://www.ysmjjsy.com)
- é‚®ç®±: chenjie@ysmjjsy.com

## ğŸ“ è”ç³»

- **Issues**: [GitHub Issues](https://github.com/GoyaDo/GoyaVision/issues)
- **è®¨è®º**: [GitHub Discussions](https://github.com/GoyaDo/GoyaVision/discussions)
- **å®‰å…¨**: è§ [SECURITY.md](SECURITY.md)

---

<div align="center">

**GoyaVision V1.0** - åŸºäº Go + Vue 3 çš„æ™ºèƒ½åª’ä½“å¤„ç†å¹³å°

**ä¸šåŠ¡ = é…ç½® Â· èƒ½åŠ› = æ’ä»¶ Â· æ‰§è¡Œ = å¼•æ“**

[â­ Star us on GitHub](https://github.com/GoyaDo/GoyaVision) â€¢ [ğŸ“– é˜…è¯»æ–‡æ¡£](docs/README.md) â€¢ [ğŸ¤ å‚ä¸è´¡çŒ®](CONTRIBUTING.md)

</div>
